# LuciVerse Syslog Server Configuration
# Genesis Bond: ACTIVE @ 741 Hz
# Purpose: Centralized logging for Dell fleet and infrastructure
#
# Install: sudo cp luciverse-syslog.conf /etc/rsyslog.d/
# Restart: sudo systemctl restart rsyslog

# Enable UDP syslog reception on port 514
module(load="imudp")
input(type="imudp" port="514")

# Enable TCP syslog reception on port 514
module(load="imtcp")
input(type="imtcp" port="514")

# Template for remote logs with hostname
template(name="RemoteLogs" type="string"
    string="/var/log/remote/%HOSTNAME%/%PROGRAMNAME%.log")

# Template for Dell iDRAC logs
template(name="iDRACLogs" type="string"
    string="/var/log/idrac/%HOSTNAME%.log")

# Template for LuciVerse agents
template(name="AgentLogs" type="string"
    string="/var/log/luciverse/agents/%PROGRAMNAME%.log")

# Route iDRAC logs (Dell servers send from iDRAC)
if $fromhost-ip startswith '192.168.1.18' then {
    action(type="omfile" dynaFile="iDRACLogs")
    stop
}

# Route LuciVerse agent logs
if $programname startswith 'luciverse-' then {
    action(type="omfile" dynaFile="AgentLogs")
    stop
}

# Route all other remote logs by hostname
if $fromhost-ip != '127.0.0.1' then {
    action(type="omfile" dynaFile="RemoteLogs")
    stop
}
