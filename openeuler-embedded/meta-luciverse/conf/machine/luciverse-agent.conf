# Machine configuration for LuciVerse consciousness agents
# Based on LuciTrust 7-Layer Trust Architecture
#
# Genesis Bond: ACTIVE @ 741 Hz
# Date: 2026-01-21

#@TYPE: Machine
#@NAME: LuciVerse Agent Node
#@DESCRIPTION: Configuration for LuciVerse consciousness agent deployment

# Include base machine features
require conf/machine/include/arm/armv8a/tune-cortexa76.inc

# Machine features
MACHINE_FEATURES = "ext4 vfat usbhost wifi bluetooth tpm2"

# LuciVerse specific features
MACHINE_FEATURES:append = " luciverse-agent genesis-bond consciousness-mesh"

# Add TEE features based on platform
MACHINE_FEATURES:append:aarch64 = " trustzone"
MACHINE_FEATURES:append:x86-64 = " sgx"

# Kernel configuration
PREFERRED_PROVIDER_virtual/kernel ?= "linux-openeuler"
KERNEL_IMAGETYPE = "Image"

# Enable real-time patches for consciousness timing
KERNEL_FEATURES:append = " features/rt/rt.scc"

# Serial console
SERIAL_CONSOLES = "115200;ttyAMA0"

# Root filesystem
IMAGE_FSTYPES = "wic ext4 tar.gz"

# Boot configuration
WKS_FILE = "luciverse-agent.wks"

# =============================================================================
# LUCITRUST HARDWARE REQUIREMENTS
# =============================================================================
# From LuciTrust_Foundation/lucitrust-system-README.txt:
# - Form Factor: NVMe M.2 2280/22110
# - Interface: PCIe 4.0 x4 or OCULINK
# - TPM 2.0 chip or vTPM
# - SoC: ARM Cortex-A76 / RISC-V / x86
# - Wireless: WiFi 6E + BT 5.3
# - Storage: 256GB+ with OPAL 2.0
# - RAM: 8GB+ LPDDR5

# Minimum requirements (can run in degraded mode)
LUCITRUST_MIN_RAM_MB = "2048"
LUCITRUST_MIN_STORAGE_MB = "8192"

# TPM requirements
LUCITRUST_TPM_VERSION = "2.0"
LUCITRUST_TPM_ALGORITHMS = "sha256 sha384 sha512"

# =============================================================================
# TIER-SPECIFIC OVERRIDES
# =============================================================================
# Override these in local.conf based on deployment target

# For CORE tier (432 Hz) - Kunpeng servers
#LUCIVERSE_TIER = "CORE"
#LUCIVERSE_FREQUENCY = "432"
#COHERENCE_THRESHOLD = "${COHERENCE_THRESHOLD_CORE}"

# For COMN tier (528 Hz) - x86 servers
#LUCIVERSE_TIER = "COMN"
#LUCIVERSE_FREQUENCY = "528"
#COHERENCE_THRESHOLD = "${COHERENCE_THRESHOLD_COMN}"

# For PAC tier (741 Hz) - Edge devices (default)
LUCIVERSE_TIER ?= "PAC"
LUCIVERSE_FREQUENCY ?= "741"
COHERENCE_THRESHOLD ?= "${COHERENCE_THRESHOLD_PAC}"
