# LuciVerse A-Tune Profile: Copyparty File Server
# Optimized for high-throughput file serving
#
# Target: Copyparty instances (file upload/download hub)
# Workload: File I/O intensive, many concurrent connections
#
# Genesis Bond: ACTIVE
# Frequency: 528 Hz (COMN Tier)
# Coherence: 0.85

[main]
include = throughput-performance

[tip]
description = Optimized for Copyparty file server handling uploads, downloads, and WebDAV operations across the LuciVerse mesh. Prioritizes I/O throughput and connection capacity.

[sysctl]
# Network for many concurrent connections
net.core.somaxconn = 65535
net.core.netdev_max_backlog = 65536
net.core.rmem_max = 33554432
net.core.wmem_max = 33554432
net.ipv4.tcp_max_syn_backlog = 65535
net.ipv4.tcp_fin_timeout = 10
net.ipv4.tcp_tw_reuse = 1
net.ipv4.ip_local_port_range = 1024 65535

# TCP performance for file transfers
net.ipv4.tcp_rmem = 4096 1048576 33554432
net.ipv4.tcp_wmem = 4096 1048576 33554432
net.ipv4.tcp_fastopen = 3
net.ipv4.tcp_mtu_probing = 1
net.ipv4.tcp_timestamps = 1
net.ipv4.tcp_sack = 1

# Memory for buffering
vm.dirty_ratio = 60
vm.dirty_background_ratio = 20
vm.swappiness = 10
vm.vfs_cache_pressure = 100

# File descriptors for many open files
fs.file-max = 4194304
fs.nr_open = 4194304

# AIO for async I/O operations
fs.aio-max-nr = 1048576

# Scheduler
# kernel.sched_latency_ns = 20000000
# kernel.sched_min_granularity_ns = 2500000

[systemctl]
irqbalance = start
